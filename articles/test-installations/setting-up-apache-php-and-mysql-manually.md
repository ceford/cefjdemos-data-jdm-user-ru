<!-- Filename: Setting_up_Apache,_PHP_and_MySQL_manually / Display title: Настройка Apache, PHP и MySQL вручную  -->

## Обзор

Вот краткий обзор шагов по настройке Apache, PHP и MySQL в Windows-среде, а также ссылки на различные инструменты, связанные с поддержкой и работой с большинством задач, связанных с Joomla!.

Чтобы инструкции были понятными и краткими, мы будем исходить из того, что везде, где мы не даем явных указаний, вы будете применять пути установки по умолчанию без изменений.

### Предупреждение

Если на вашем компьютере уже установлены предустановленные AMP-стэки:

- Вернуться к вашему AMP-стэку будет сложно. Различные установки, которые мы будем выполнять ниже, перезапишут значения реестра и внесут изменения в общие параметры среды. (Это касается как минимум среды ПК/Windows.)
- Если вам нужно сохранить какую-либо конфигурацию (Apache, MySQL или PHP) или данные (ваши существующие веб-сайты и связанные базы данных), перед тем как пытаться следовать этой инструкции, сделайте соответствующие резервные копии.

(необходимо дополнить конкретными советами о том, как достичь вышеупомянутого...)

## Установка MySQL

1.  Загрузите подходящий <a href="https://dev.mysql.com/downloads/mysql/"
    rel="nofollow noreferrer noopener">установщик MySQL</a> для вашей платформы.
2.  Запустите установку и выберите путь установки Custom.
3.  Пройдите весь процесс установки и нажмите Finish.
4.  Перед вами появится *Мастер конфигурации экземпляра сервера MySQL*.
    1.  Убедитесь, что выбрана *Стандартная конфигурация*, и нажмите "Далее".
    2.  Если MySQL уже установлен, возможно, появится сообщение *Служба Windows с именем MySQL уже существует. Пожалуйста, корректно удалите эту службу или выберите другое имя для новой службы.* Если это так, выберите альтернативное имя службы.
    3.  В следующем окне проверьте, чтобы было выбрано *Include Bin Directory in Windows PATH*. Это позволит вам пользоваться различными утилитами MySQL из командной строки.
    4.  В следующем окне вы сможете создать пароль для вашего пользователя root MySQL, который обладает самым высоким уровнем доступа на сервере.
    5.  В последнем окне все внесенные вами изменения будут сохранены после нажатия кнопки *Execute*, и служба Windows для этого экземпляра будет запущена.

### Примечания

1.  Для того чтобы сделать инструкцию максимально доступной, мы пропустили ряд сценариев настройки вашего экземпляра MySQL, таких как возможность переноса файлов базы данных.
2.  По умолчанию MySQL устанавливается в режиме STRICT, что может вызывать некоторые ошибки при использовании расширений или приложений, которые это не учитывали.

### Ресурсы MySQL

- <a href="https://www.heidisql.com/" class="external text"
   rel="nofollow noreferrer noopener">HeidiSQL</a> Простая в использовании и расширяемая замена phpMyAdmin, находящаяся на постоянной стадии разработки.
- <a href="https://dev.mysql.com/downloads/workbench/"
  class="external text"
  rel="nofollow noreferrer noopener">MySQL Workbench</a> Различные инструменты, среди которых вы оцените Администратора, который поможет вам настроить ваш экземпляр MySQL. Требует
  <a href="https://dotnet.microsoft.com/en-us/" class="external text"
   rel="nofollow noreferrer noopener">.Net framework</a>.
- <a href="https://www.phpmyadmin.net/" class="external text"
   rel="nofollow noreferrer noopener">phpMyAdmin</a> Мощный веб-клиент для MySQL, используемый для администрирования всего, что связано с MySQL.
- <a href="https://dev.mysql.com/doc/" class="external text"
   rel="nofollow noreferrer noopener">Документация MySQL</a>

## Настройка Apache

1. <a href="https://httpd.apache.org/download.cgi" class="external text" rel="nofollow noreferrer noopener">Скачайте установочный файл</a>, который вам подходит.
2. Запустите мастер установки и пройдите каждый шаг, пока не дойдете до окна информации о сервере. Введите опции ниже в данном порядке в каждом из полей, если у вас нет никаких специфических требований к настройке веб-сервера:
   1. localhost,
   2. localhost и
   3. admin@localhost
3. Пройдите мастера установки, и Apache веб-сервер будет установлен и запущен как служба Windows.
4. В строке состояния Windows теперь вы увидите розовое перо с зеленой кнопкой воспроизведения, что указывает на то, что Apache работает. Перейдите в браузере по ссылке <a href="http://localhost/" rel="nofollow noreferrer noopener">http://localhost/</a>, чтобы убедиться, что все работает.
5. Теперь перейдите в папку, где установлен Apache, обычно это *C:\Program Files\Apache Software Foundation\Apache2.2* и ознакомьтесь с различными каталогами:
   1. *bin* - содержит различные двоичные файлы, некоторые из которых перечислены ниже. Чтобы получить доступ к этим приложениям, большинство из которых основаны на командах, нам нужно добавить путь к директории *bin* в глобальную переменную PATH. Для этого щелкните правой кнопкой на Мой компьютер \> Свойства \> Дополнительно \> Переменные среды и в списке системных переменных найдите и выберите переменную PATH и нажмите Изменить, добавьте точку с запятой, если ее там нет, а затем укажите абсолютный путь к вашей директории bin. Подтвердите изменения, чтобы выйти из диалога системных свойств.
      1. *httpd.exe* — это сам веб-сервер Apache, который порождает несколько дочерних процессов, обрабатывающих столько одновременно входящих запросов клиентов, сколько требуется директивой MaxClients;
      2. *ab.exe* — это инструмент для тестирования производительности, который поставляется с Apache и позволяет вам увидеть, насколько хорошо ваше приложение может работать за единицу времени.
   2. *conf* - папка, где расположены различные файлы конфигурации, из которых следующие представляют наибольший интерес в нашем случае:
      1. *httpd.conf* — большинство директив сервера находятся в этом файле. Для удобного доступа вы должны связать тип файла *.conf* с удобным текстовым редактором, т.е. чем-то, отличным от стандартного Блокнота.
      2. *extra\httpd-vhosts.conf* — содержит директивы, позволяющие использовать ваш локальный сервер в качестве виртуального хоста, т.е. запускать несколько серверов на вашем ПК. Один из сценариев использования — если в процессе разработки вы хотите сопоставить настоящий домен, для которого вы работаете, с вашей локальной копией, это можно сделать, внося небольшие изменения в этот файл. Мы обсудим это подробнее ниже.
   3. *htdocs* — корень по умолчанию для веб-сервера, туда маппируется <a href="http://localhost/" rel="nofollow noreferrer noopener">http://localhost/</a>, если вы не переконфигурируете его в *httpd.conf* выше.
   4. *logs* — журналы доступа и ошибок, используются при решении различных вопросов, связанных с вашим сервером или даже вашим приложением.

### Ресурсы Apache

- <a href="https://httpd.apache.org/docs/current/" class="external text" rel="nofollow noreferrer noopener">Справочная документация Apache</a>

## Настройка PHP

1.  <a href="https://windows.php.net/download/" class="external text" rel="nofollow noreferrer noopener">Скачать PHP</a> и выберите обычно VC6 x86 Thread Safe в формате Zip. Различные параметры связаны с тем, как код PHP был скомпилирован в бинарный формат, и, вероятно, это не проблема, о которой вам стоит беспокоиться на данный момент.
2.  Создайте папку под C:\Program Files\\ (или где находится ваш каталог программ), и назовите ее PHP.
3.  Найдите загруженный Zip файл, переместите его в вновь созданную папку и распакуйте его непосредственно в эту папку.
4.  Теперь добавим путь PHP в нашу глобальную переменную PATH, следуя приведенной выше инструкции.

### Настройка PHP

Настройка сводится к редактированию файла *php.ini*. Пример файла для различных сценариев уже находится в вашей папке PHP. Переименуем *php.ini-development* в *php.ini* и откроем его в вашем любимом текстовом редакторе. Общие значения для настройки следующие, и все эти переменные хорошо задокументированы в файле *php.ini*. (Обратите внимание, что это общая настройка сервера, которая применяется ко всем вашим проектам):

- *max_execution_time* - если у вас есть скрипты, которые выполняются слишком долго, и сервер возвращает различные неожиданные результаты, из-за того что не может выполнить весь процесс.
- *memory_limit*
- *error_reporting*
- *display_errors*
- *log_errors* - переменная, на которую вам нужно будет обратить внимание в производственных сценариях
- *upload_tmp_dir*
- *upload_max_filesize*
- *extension_dir* - чтобы избежать осложнений, мы укажем каталог, где находятся следующие расширения, раскомментировав эту переменную и назначив абсолютное расположение папки. Полная строка должна выглядеть следующим образом:
    extension_dir = "C:\Program Files\PHP\ext"
- Раздел динамических расширений содержит различные дополнительные модули, которые вы хотите загрузить, а закомментированные являются теми, которые идут в комплекте с PHP и могут быть найдены в каталоге *ext* в папке вашего PHP. Если вы хотите активировать какое-либо из них, просто удалите комментарий, как вам следует сделать со следующими расширениями:
  - php_curl.dll
  - php_gd2.dll
  - php_mbstring.dll
  - php_mysql.dll
  - php_mysqli.dll
  - php_pdo.dll
  - php_pdo_mysql.dll
  - php_xsl.dll
- session.save_path

### Настройка Apache для работы с PHP

Теперь, когда мы настроили PHP для работы по нашему усмотрению, давайте займемся Apache и сделаем то же самое.

- Откройте *httpd.conf* и в разделе "Dynamic Shared Object (DSO) Support" добавьте следующие директивы. (Если вы разместили папку PHP в другом месте, соответствующим образом измените путь для php5apache2_2.dll ниже.):
    LoadModule php5_module "C:/Program Files/PHP/php5apache2_2.dll"
    AddType application/x-httpd-php .php
- В DirectoryIndex добавьте *index.php* и *index.htm* как возможные файлы для отображения при запросе директории следующим образом:
    DirectoryIndex index.html index.htm index.php
- В конце файла добавьте следующую строку, которая укажет, где находится файл *php.ini*
    PHPIniDir "C:/Program Files/PHP"

### Перезагрузка и тестирование PHP

Как только вы внесете изменения в *php.ini*, *httpd.conf* или любые другие файлы конфигурации, вам нужно будет перезапустить Apache, чтобы увидеть результат изменений. Так что теперь давайте перезапустим Apache, используя инструмент Apache Monitor, который вы найдете в строке состояния Windows. Надеемся, что вы не увидите никаких диалогов, и Apache Monitor продолжит работать.

Теперь мы проверим, что PHP работает. Перейдите в корневой каталог документов вашего веб-сервера (в случае по умолчанию *C:\Program Files\Apache Software Foundation\Apache2.2\htdocs*) и добавьте файл, называемый *phpinfo.php* со следующим содержимым:

Это отобразит страницу с информацией о вашей настройке PHP и различных загруженных модулях/расширениях. Укажите в браузере на
<a href="http://localhost/phpinfo.php" rel="nofollow noreferrer noopener">http://localhost/phpinfo.php</a>.

### Установка и настройка *xdebug*

1.  Направьте ваш браузер на
    <a href="https://xdebug.org/wizard" class="external text" rel="nofollow noreferrer noopener">Мастер установки Xdebug</a>. Эта страница поможет вам найти подходящую версию Xdebug.
2.  Скопируйте всю страницу *phpinfo*, которую мы запустили выше, и вставьте ее в текстовое поле, следуя предоставленным инструкциям для установки.

### Ресурсы XDebug

- <a href="https://www.php.net/docs.php" class="external text" rel="nofollow noreferrer noopener">Руководство по PHP</a>
  Отличная и актуальная документация с ценными дополнительными комментариями от пользователей. Доступны для скачивания версии.
- <a href="https://xdebug.org/docs/" class="external text" rel="nofollow noreferrer noopener">Документация Xdebug 3</a>

