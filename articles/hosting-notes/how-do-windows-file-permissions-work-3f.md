<!-- Filename: How_do_Windows_file_permissions_work%3F / Display title: Разрешения на файлы в Windows  -->

## Введение

Для тех из вас, кто разрабатывает или размещает свои сайты Joomla! в среде Windows, иногда бывает сложно получить соответствующую информацию о правах доступа. К сожалению, это факт, что большая часть веб-хостинга предоставляется на базе Unix и хорошо документирована в этой среде. Надеемся, что следующая информация поможет развеять любую путаницу и предоставить некоторые рекомендации.

### Обзор Windows Web Server

Прежде всего, давайте обсудим различия между серверами. В общем, большинство пользователей Windows, похоже, используют либо Apache(Win32), либо Microsoft IIS. Эти два веб-сервера работают очень по-разному и используют слегка различные модели доставки. Apache(Win32) обычно запускается на хост-компьютере как пользователь, под которым он был установлен, тогда как IIS устанавливается под конкретного пользователя, но будет работать под недавно установленным пользователем *IUSR_*.

### Установки прав доступа по умолчанию

По умолчанию Unix, как правило, предоставляет полный доступ к файлам и каталогам только одному *владельцу*. В отличие от этого подхода, Windows по умолчанию также назначает группе *Все* полные права. Первое, что делает любой хороший администратор Windows, - удаляет права группы *Все*, чтобы повысить безопасность. Для локального тестирования на ПК это, вероятно, не нужно, но это объясняет, почему, если *Все* не удалены и вы запускаете какой-либо сценарий проверки разрешений или предварительную проверку установки Joomla!, в целом у вас будет полный доступ для *Чтения, записи и выполнения*, потому что вы получаете права группы *Все*.

### Microsoft Internet Information Server (IIS)

IIS существует в двух основных вариантах, PWS (Personal WebServer) и IIS (Internet Information Server). По сути, это одно и то же приложение. PWS просто урезанная версия IIS, предназначенная для настольных сред, тогда как IIS предназначен для серверных сред. PWS ограничивает вас одним основным веб-сайтом, поэтому ваши установки приложения, как правило, будут в подкаталогах основного веб-сайта. IIS, с другой стороны, предоставляет функциональность для работы виртуальных хостов из этих каталогов, обеспечивая возможность нескольких сайтов.

Из-за различных функциональных ограничений PWS не имеет *Мастера прав доступа*, так как считается, что он не нужен. Только один пользователь будет использовать сервер PWS. В IIS многие пользователи будут использовать сервер, и поэтому необходимы различные назначения разрешений.

После удаления аккаунта *Все* в Windows IIS остается аккаунт *IUSR_*, обладающий правами верхнего уровня на каталоги веб-сервера. Теперь проверка прав доступа должна дать другие результаты. Только аккаунт *IUSR_* имеет полные права, и другие пользователи должны получать либо *только на чтение*, либо не иметь прав. Права определяются тем, какие другие пользователи были вручную назначены для каталогов IIS.

### Назначение прав доступа

Назначение прав в Windows относительно простое, но иногда может быть немного запутанным. Щелкните правой кнопкой мыши на нужную папку или файл. Выбор *Свойства* или *Общий доступ и безопасность* откроет панель управления безопасностью Windows. Выбор (один клик) любого имени пользователя в списке покажет права этого пользователя в нижней половине панели. Некоторые права могут быть выделены серым. Они недоступны либо потому, что текущий пользователь (под которым вы вошли в систему) не имеет достаточных прав для их изменения, либо они унаследованы из вышестоящего каталога и настроены на использование разрешений каталога более высокого уровня (это, как правило, механизм по умолчанию).

Как видите, Windows использует следующую схему разрешений/прав:

| № | Разрешения | Права |
|:-----:|:----------|:---------|
| 1 | Полный контроль | Разрешает: 1, 2, 3, 4, 5, 6, 7 |
| 2 | Изменение | Разрешает: 2, 3, 4, 5, 6 |
| 3 | Чтение и выполнение | Разрешает: 3, 4 |
| 4 | Просмотр содержимого папки | Разрешает: 4 (но не может запускать программы) |
| 5 | Чтение | Разрешает: 5 (подразумевает: 4) |
| 6 | Запись | Разрешает: 6 (подразумевает: 4) |
| 7 | Специальные разрешения | Разрешает: Комбинации |

### Свойства разрешений файлов Windows

Разрешения файлов Windows можно рассматривать как имеющие **похожие** свойства с разрешениями файлов UNIX или Linux (моды), они просто представлены по-другому. Например, если вы в основном пользователь Unix/Linux, вы, вероятно, привыкли к представлению разрешений в виде 644/666 755/777, вместо того чтобы их описывать вышеприведенными терминами. Итак, когда вам предлагается использовать 644, это означает:

* Владельцу этого файла можно читать и записывать его.
* Группа владельца может читать файл.
* Все остальные могут читать файл.

**Примечание:** Разрешения Windows и Unix (списки контроля доступа) не являются идентичными, так как Windows не использует механизм *Групп* аналогичным образом. Однако для этого обсуждения и в контексте среды веб-хостинга можно их кратко сопоставлить. Однако в Windows ***Группы*** не используются и ***Все*** должны быть удалены. Вот где Windows и Unix не совсем эквивалентны, но можно *соотнести* или *коррелировать* эквивалентные значения.

Эта информация не предоставит вам полноценного руководства по правам Windows или NTFS, но даст больше понимания того, как часто цитируемые номера разрешений Unix/Linux соотносятся с машиной с файловой системой NTFS. Файлы, которые помещены в корневую папку www или public_html или в любой другой каталог, на который указывает ваш сайт (www.domain.com.au или localhost) на вашем жестком диске, должны принадлежать вашей учетной записи пользователя, но только если этот пользователь не является привилегированным пользователем, таким как *Администратор* в Windows или *root* в UNIX/Linux. Эти учетные записи предоставляют слишком много доступа и не должны использоваться для повседневной работы.

### Лучшая практика

Общие практике безопасности предполагают, что все **файлы** должны иметь следующие права:

* **Владелец:** Чтение и запись
* **Группа:** Только чтение
* **Прочие:** Только чтение

Все **директории/папки** должны иметь следующие права:

* **Владелец:** Чтение, запись и выполнение
* **Группа:** Чтение и выполнение
* **Прочие:** Чтение и выполнение

Можно спорить, что это не обязательно *оптимальная* безопасность, но необходимо балансировать между безопасностью, функциональностью и поддерживаемостью. В отличие от Unix, Windows не поддерживает единый список контроля для *выполнения*, а просто предоставляет *Чтение и выполнение* в сочетании, что не подразумевает *запись*. Однако ACL *Чтение и выполнение* подразумевает *просмотр содержимого каталога*. Следовательно, если у вас есть только *Чтение и запись* прав на каталог, но нет прав *выполнения*, вы не сможете просматривать его содержимое и можете столкнуться с проблемами при попытке запуска файла через веб-браузер. Немного понимания разрешений UNIX/Linux требуется для полной эквивалентности/корреляции их с разрешениями Windows. Следующая таблица должна помочь;

| Unix Mode | Windows ACL | Комментарии |
|:-----:|:----------|:---------|
| 7 | Изменение | Чтение, запись и выполнение, вы должны быть владельцем этого файла |
| 6 | Чтение и запись |  |
| 5 | Чтение и выполнение | используется для большинства приложений |
| 4 | Только чтение | безопасность за счет неочевидности - плохая практика |
| 3 | Запись и выполнение | недоступно через Windows, если только не используется "Специальные" разрешения, редко используется |
| 2 | Только запись | недоступно через Windows, если только не используется "Специальные" разрешения, редко используется |
| 1 | Только выполнение | недоступно через Windows, если только не используется "Специальные" разрешения, редко используется |

В сравнении с Unix Modes, когда вы видите что-то вроде 644, вы разбиваете это на три элемента:

**6**  :  **4**  : **4**

Первое число обозначает права ***владельца***, второе - права ***группы***, а третье - права *других*. Эквивалент в Windows будет:

* **Владелец** (6) : **Чтение и запись**
* **Группа** (4) : **Только чтение**
* **Прочие** (4) : **Только чтение**

Надеемся, этот пример дает немного понимания того, как соотнести Unix Modes/Permissions с правами/ACL Windows. Этот документ не включает более сложные темы, такие как *Эффективные*, *Наследуемые* или *Специальные* разрешения. Несмотря на простоту использования Windows, механизмы разрешений и ACL Microsoft на самом деле довольно сложны и очень обширны, но это может лишь дать вам быстрый ориентир, чтобы попытаться развеять часть путаницы, окружающей перевод разрешений Unix и Windows.

*Переведено openai.com*

