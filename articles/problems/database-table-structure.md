<!-- Filename: J4.x:Fix_%22Database_Table_Structure_NOT_Up_to_Date%22_before_Update / Display title: Структура таблицы базы данных  -->

## Сообщенные ошибки

При обновлении Joomla! структура таблицы базы данных должна быть актуальной, прежде чем процесс может начать. *Предварительная проверка на обновление для Joomla* сообщает, если это не так.

Но когда вы переходите в **Система → Обслуживание → База данных**, данных не обнаружено. Это было отмечено в нескольких версиях Joomla! 4.x.

## Какова Причина

Проблема вызвана пустой таблицей `#__schemas` в базе данных. Скорее всего, это происходит, когда экземпляр Joomla! установлен не официальным установщиком Joomla!, а через кастомный скрипт, который не заполнил все необходимые данные.

## Как исправить

Вы можете исправить это, добавив недостающее значение в таблицу. С помощью phpMyAdmin (или другого клиента базы данных) перейдите к таблице `#__extensions`. Выполните поиск по name='files_joomla' и запишите идентификатор расширения (в нашем случае *211*).

Далее вам нужно узнать последний установленный SQL-скрипт. Перейдите в `administrator/components/com_admin/sql/updates/mysql` и найдите файл с самым высоким номером версии. В этом примере предположим, что *4.0.3-2021-09-05.sql* — это имя файла с самой высокой версией. Теперь вам нужно добавить это значение в ваш запрос на вставку в качестве второго значения:

```sql
INSERT INTO `#__schemas` (`extension_id`, `version_id`) VALUES
(211, '4.0.3-2021-09-05');
```

или для PostgreSQL:

```sql
INSERT INTO "#__schemas" ("extension_id", "version_id") VALUES
(211, '4.0.3-2021-09-05');
```

Замените `#__` на ваш префикс базы данных перед выполнением команд.

Затем в меню Администратора перейдите в **Система → Обслуживание → База данных** и исправьте таблицы.

Теперь обновление должно работать как ожидалось.

*Переведено с помощью openai.com*

