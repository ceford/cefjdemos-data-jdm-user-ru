<!-- Filename: How_do_you_block_direct_hot_linking_to_image_files_using_htaccess%3F / Display title: Запрет прямой ссылки на изображение -->

## Определение

Хотлинкинг — это практика ссылаться на изображение на одном сайте в статье на другом сайте. Это может быть очень полезной практикой. Этот сайт использует многие изображения, которые на самом деле расположены на сайте docs.joomla.org. Это экономит время и усилия, необходимые для создания скриншотов, а также снижает нагрузку на трафик этого сайта. Однако могут возникнуть проблемы с авторским правом, и вы можете захотеть предотвратить использование ваших изображений таким образом.

Метод, описанный здесь, использует файл *.htaccess*, который является функцией сервера Apache. Другие веб-серверы могут предоставить другие методы для предотвращения хотлинкинга.

## Инструкции

Поместите следующий код в файл *.htaccess* в корневом каталоге.
```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteCond %{HTTP_REFERER} !^$
    RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?yourdomain.com [NC]
    RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?google.com [NC]
    RewriteRule \.(jpg|jpeg|png|gif|webp|svg)$ - [NC,F,L]
</IfModule>
```

### Объяснение

* Первая RewriteCond позволяет прямые запросы по URL без реферера.
* Вторая RewriteCond позволяет запросы с вашего собственного домена. Флаг *\[NC\]*
    означает *No Case*, то есть соответствует как прописным, так и строчным символам.
* Третья RewriteCond позволяет запросы с Google, чтобы ваши изображения
    могли по-прежнему появляться в результатах поиска. Вы можете добавить аналогичные строки для любых
    других сайтов, которым вы хотите разрешить.
* RewriteRule блокирует запросы на файлы изображений с доменов,
    которые не были ранее разрешены. Флаг F указывает браузеру вернуть заголовок Forbidden
    (403). L означает Last rule (последнее правило).

### Блокировка хотлинкинга с определённых доменов

Чтобы остановить хотлинкинг только с определённых доменов, таких как *myspace.com*,
*blogspot.com* и *livejournal.com*, разрешая другим веб-сайтам
делать хотлинк на ваши изображения, используйте следующий код:

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{HTTP_REFERER} ^http(s)?://(.+\.)?myspace\.com/ [NC,OR]
    RewriteCond %{HTTP_REFERER} ^http(s)?://(.+\.)?blogspot\.com/ [NC,OR]
    RewriteCond %{HTTP_REFERER} ^http(s)?://(.+\.)?livejournal\.com/ [NC]
    RewriteRule \.(jpg|jpeg|png|gif|webp|svg)$ - [NC,F,L]
</IfModule>
```

Вы можете добавить столько разных доменов, сколько хотите. Каждая строка
*RewriteCond*, кроме последней, должна заканчиваться флагами *\[NC,OR\]*.
*NC* означает игнорировать регистр. *OR* означает "Or Next", т.е.
совпадать с этой строкой **или** следующей строкой. Последняя *RewriteCond*
опускает флаг *OR*, чтобы прекратить сопоставление после последней *RewriteCond*.

*Переведено с помощью openai.com*

